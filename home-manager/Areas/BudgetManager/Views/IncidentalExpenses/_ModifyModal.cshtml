@using home_manager.Areas.BudgetManager.Models
@using home_manager.Helpers
@model IncidentalItem

<div class="modal-header">
    @if(Model.Id > 0)
    {
        <h3 class="modal-title">Edit Incidental Expense</h3>
    }
    else
    {
        <h3 class="modal-title">Add Incidental Expense</h3>
    }
    <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
<div class="modal-body">
    <form id="modifyItemForm">
        <div class="mb-3">
            <input asp-for="@Model.IsPaid" type="checkbox" class="form-check-input" id="newPaid" />
            <label asp-for="@Model.IsPaid" class="form-label">Paid</label>
        </div>
        <div class="mb-3">
            <label asp-for="@Model.Name" class="form-label">Name</label>
            <input asp-for="@Model.Name" id="newExpense" class="form-control" />
        </div>
        <div class="mb-3">
            <label asp-for="@Model.Amount" class="form-label">Amount</label>
            <div class="input-group">
                <span class="input-group-text">$</span>
                <input asp-for="@Model.Amount"
                       id="newAmount"
                       class="form-control"
                       type="number"
                       min="0"
                       placeholder="0.00"
                       value="@(Math.Abs(Model.Amount).ToString("F2"))" />
            </div>
        </div>
        <div class="mb-3">
            <label asp-for="@Model.Date" class="form-label">Date</label>
            <input asp-for="@Model.Date"
                   type="date"
                   id="newDate"
                   class="form-control"
                   value="@Model.Date.ToString("yyyy-MM-dd")" />
        </div>
        <div class="mb-3">
            <label asp-for="@Model.Category_catID" class="form-label">Category</label>
            <select asp-for="@Model.Category_catID" id="categoryDropdown" class="form-select">
                @foreach (var category in Model.CategoryList)
                {
                    <option value="@category.Id"
                            selected="@(category.Id == Model.Category_catID)">
                        @category.Description
                    </option>
                }
            </select>
        </div>
        <div class="mb-3">
            <label asp-for="@Model.Description" class="form-label">Description (Optional)</label>
            <textarea asp-for="@Model.Description" id="newDescription" class="form-control"></textarea>
        </div>
        
    </form>
</div>
<div class="modal-footer modify-modal-footer">
    <div>
        <button type="button" class="btn btn-danger" id="edit-@Model.Id-@Model.Name" onclick="deleteIncidentalItem(this)" style='@(Model.Id == 0 ? "display: none;" : "")'>Delete Item</button>
    </div>
    <div>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="edit-@Model.Id" onclick="saveItem(this)">@(Model.Id > 0 ? "Save Changes" : "Add Item")</button>
    </div>
</div>

<script>
    $(document).ready(function() {

        setDateInputRange();
        $('#monthFilter', '#yearFilter').change(setDateInputRange);

    });
</script>