@model home_manager.Areas.BudgetManager.ViewModels.RecurringItems_VModel
@{
    ViewData["Title"] = "Recurring Items";
}

<style>
    .container {
        max-width: 95vw !important;
        margin: 0 auto;
        padding: 0 10px;
    }

    .card {
        width: 100%;
        margin: 0;
    }

    .card-body {
        padding: 1rem 0.5rem;
    }

    .table {
        margin: 0;
    }

        .table td, .table th {
            padding: 0.5rem 0.25rem;
        }
</style>

<div class="container">
    <h2 class="mb-4">Recurring Expenses</h2>

    <div class="card">
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th></th>
                            <th>Name</th>
                            <th>Category</th>
                            <th class="text-end">Minimum Due</th>
                            <th class="text-end">Balance</th>
                            <th class="text-end">Interest Rate</th>
                            <th></th>
                            <th>Day</th>
                            <th>Jan</th>
                            <th>Feb</th>
                            <th>Mar</th>
                            <th>Apr</th>
                            <th>May</th>
                            <th>Jun</th>
                            <th>Jul</th>
                            <th>Aug</th>
                            <th>Sep</th>
                            <th>Oct</th>
                            <th>Nov</th>
                            <th>Dec</th>
                            <th>Paid Off</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td class="text-end"><strong>@Model.FormatCurrency(Model.TotalMinimumDue)</strong></td>
                            <td class="text-end"><strong>@Model.FormatCurrency(Model.TotalBalance)</strong></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        @foreach (var item in Model.Items)
                        {
                            <tr>
                                <td><button type="button" class="btn btn-outline-danger" style="border: none;">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil" viewBox="0 0 16 16">
                                            <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325" />
                                        </svg>
                                    <span class="visually-hidden">Button</span>
                                </button></td>
                                <td>
                                    @if (!string.IsNullOrEmpty(item.Description))
                                    {
                                        <span data-bs-toggle="tooltip" data-bs-placement="right" title="@item.Description">
                                            @item.Name
                                        </span>
                                    }
                                    else
                                    {
                                        @item.Name
                                    }
                                </td>
                                <td>@(item.CategoryName ?? "Uncategorized")</td>
                                <td class="text-end">@Model.FormatCurrency(item.MinimumDue)</td>
                                <td class="text-end">@(item.Balance.HasValue ? Model.FormatCurrency(item.Balance.Value) : "-")</td>
                                <td class="text-end">@(item.InterestRate.HasValue ? $"{(item.InterestRate * 100):F2}%" : "-")</td>
                                <td></td>
                                <td class="text-center">@item.DayOfMonth</td>
                                <td class="text-center"><input type="checkbox" disabled @(item.January ? "checked" : "")></td>
                                <td class="text-center"><input type="checkbox" disabled @(item.February ? "checked" : "")></td>
                                <td class="text-center"><input type="checkbox" disabled @(item.March ? "checked" : "")></td>
                                <td class="text-center"><input type="checkbox" disabled @(item.April ? "checked" : "")></td>
                                <td class="text-center"><input type="checkbox" disabled @(item.May ? "checked" : "")></td>
                                <td class="text-center"><input type="checkbox" disabled @(item.June ? "checked" : "")></td>
                                <td class="text-center"><input type="checkbox" disabled @(item.July ? "checked" : "")></td>
                                <td class="text-center"><input type="checkbox" disabled @(item.August ? "checked" : "")></td>
                                <td class="text-center"><input type="checkbox" disabled @(item.September ? "checked" : "")></td>
                                <td class="text-center"><input type="checkbox" disabled @(item.October ? "checked" : "")></td>
                                <td class="text-center"><input type="checkbox" disabled @(item.November ? "checked" : "")></td>
                                <td class="text-center"><input type="checkbox" disabled @(item.December ? "checked" : "")></td>
                                <td class="text-center"><input type="checkbox" disabled @(item.PaidOff ? "checked" : "")></td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            // Initialize Bootstrap tooltips
            const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');
            const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl));

            $('.table input[type="checkbox"]').each(function() {
                const td = $(this).closest('td');
                if ($(this).is(':checked')) {
                    td.addClass('table-success');
                } else {
                    td.addClass('table-danger');
                }
            })
        });
    </script>
}