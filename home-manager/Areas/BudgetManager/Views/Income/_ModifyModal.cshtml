@using home_manager.Areas.BudgetManager.Models
@using home_manager.Helpers
@model IncomeLedgerItem

<div class="modal-header">
    <h3 class="modal-title">Edit Income Item</h3>
    <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
<div class="modal-body">
    <form id="modifyItemForm">
        <div class="mb-3">
            <input asp-for="@Model.Paid" type="checkbox" class="form-check-input" id="newPaid" />
            <label asp-for="@Model.Paid" class="form-label">Paid</label>
        </div>
        <div class="mb-3">
            <label asp-for="@Model.Person_prnId" class="form-label">Category</label>
            <select asp-for="@Model.Person_prnId" id="categoryDropdown" class="form-select">
                @foreach (var person in Model.PersonList)
                {
                    <option value="@person.Id"
                            selected="@(person.Id == Model.Person_prnId)">
                        @person.Name
                    </option>
                }
            </select>
        </div>
        <div class="mb-3">
            <label asp-for="@Model.Date" class="form-label">Date</label>
            <input asp-for="@Model.Date"
                   type="date"
                   id="newDate"
                   class="form-control"
                   value="@Model.Date.ToString("yyyy-MM-dd")" />
        </div>
        <div class="mb-3">
            <label asp-for="@Model.Amount" class="form-label">Amount</label>
            <div class="input-group">
                <span class="input-group-text">$</span>
                <input asp-for="@Model.Amount"
                       id="newAmount"
                       class="form-control"
                       type="number"
                       min="0"
                       placeholder="0.00"
                       value="@(Math.Abs(Model.Amount).ToString("F2"))" />
            </div>
        </div>
    </form>
</div>
<div class="modal-footer">
    <div>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="edit-@Model.Id" onclick="saveItem(this)">Save Changes</button>
    </div>
</div>

<script>
    $(document).ready(function() {

        setDateInputRange();
        $('#monthFilter', '#yearFilter').change(setDateInputRange);

    });
</script>